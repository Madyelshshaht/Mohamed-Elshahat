import{r as l,u as B,j as e}from"./index-DvA7Azc1.js";import{L as R,y as p}from"./ReactToastify-BKJoilFz.js";import{G as v,F as T}from"./index-BH1CdR2_.js";function q(t){return v({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0M8 1c-1.573 0-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4s.875 1.755 1.904 2.223C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777C13.125 5.755 14 5.007 14 4s-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1"},child:[]},{tag:"path",attr:{d:"M2 7v-.839c.457.432 1.004.751 1.49.972C4.722 7.693 6.318 8 8 8s3.278-.307 4.51-.867c.486-.22 1.033-.54 1.49-.972V7c0 .424-.155.802-.411 1.133a4.51 4.51 0 0 0-4.815 1.843A12 12 0 0 1 8 10c-1.573 0-3.022-.289-4.096-.777C2.875 8.755 2 8.007 2 7m6.257 3.998L8 11c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13h.027a4.55 4.55 0 0 1 .23-2.002m-.002 3L8 14c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.5 4.5 0 0 1-1.3-1.905"},child:[]}]})(t)}function G(t){return v({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V7H13V11H17V13H13V17H11V13H7V11H11ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z"},child:[]}]})(t)}function $(t){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm52.7 283.3L256 278.6l-52.7 52.7c-6.2 6.2-16.4 6.2-22.6 0-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3l52.7-52.7-52.7-52.7c-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3 6.2-6.2 16.4-6.2 22.6 0l52.7 52.7 52.7-52.7c6.2-6.2 16.4-6.2 22.6 0 6.2 6.2 6.2 16.4 0 22.6L278.6 256l52.7 52.7c6.2 6.2 6.2 16.4 0 22.6-6.2 6.3-16.4 6.3-22.6 0z"},child:[]}]})(t)}const J=({editMode:t=!1,projectData:o={}})=>{const[y,f]=l.useState(""),[k,g]=l.useState(""),[a,i]=l.useState([]),[x,w]=l.useState(""),[j,h]=l.useState(""),[C,m]=l.useState(""),[I,S]=l.useState([]),[N,u]=l.useState(""),[n,E]=l.useState(!1),V=localStorage.getItem("token"),L=B(),F=()=>{x.trim()&&(i([...a,x.trim()]),w(""))},H=r=>{const s=[...a];s.splice(r,1),i(s)},P=async r=>{r.preventDefault();const s=new FormData;I.forEach(d=>{s.append("images",d)}),s.append("title",y),s.append("desc",k),s.append("skills",JSON.stringify(a)),s.append("deployLink",j),s.append("githubLink",C);const c=t?`https://backendportfolio-seven.vercel.app/api/editprojects/${o._id}`:"https://backendportfolio-seven.vercel.app/api/projects",b=t?"PUT":"POST";try{const A=await(await fetch(c,{method:b,headers:{Authorization:`Bearer ${V}`},body:s})).json();console.log("AddedData:",A),A.success?(t?p.info("Edit successfully"):p.success("Added successfully"),t||(f(""),g(""),i([]),S([]),h(""),m(""),u(null)),t&&setTimeout(()=>{L("/project")},1500)):p.error("Failed to add project")}catch(d){console.error(d),p.error("Error submitting project")}};l.useEffect(()=>{t&&o&&(f(o.title||""),g(o.desc||""),i(o.skills||[]),h(o.deployLink||""),m(o.githubLink||""),o.images&&o.images.length>0?u(o.images[0].url):u(""))},[t,o]);const z=r=>{const s=Array.from(r.target.files);if(s.length>0){S(s);const c=new FileReader;c.onload=function(b){u(b.target.result)},c.readAsDataURL(s[0])}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("h1",{className:"text-3xl font-bold",children:"Add Project"}),e.jsxs("form",{className:"my-10 flex flex-col gap-5",onSubmit:P,children:[e.jsx("input",{className:"block w-full rounded-md px-3.5 py-2 text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600",type:"text",placeholder:"Title",value:y,onChange:r=>f(r.target.value),required:!0}),e.jsx("input",{className:"block w-full rounded-md px-3.5 py-2 text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600",type:"text",placeholder:"description",value:k,onChange:r=>g(r.target.value),required:!0}),e.jsxs("div",{className:"flex flex-col  gap-2 items-center ",children:[e.jsxs("div",{className:"w-[100%] flex gap-2  text-start ",children:["Skills:",a.map((r,s)=>e.jsxs("span",{className:"bg-green-600  px-2 flex  gap-3 relative",children:[" ",r,e.jsx("button",{type:"button",className:"text-red-400 hover:text-red-600 cursor-pointer  ",onClick:()=>H(s),children:e.jsx("span",{className:"text-white absolute right-0 top-0 font-bold",children:e.jsx($,{})})})]},s))]}),e.jsxs("div",{className:"flex gap-2 items-center w-[100%]",children:[e.jsx("input",{className:"block md:w-[85%] w-[65%]  rounded-md px-3.5 py-2 text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600",type:"text",placeholder:"Skill",value:x,onChange:r=>w(r.target.value)}),e.jsxs("button",{class:"rounded-md relative w-34 h-10 cursor-pointer flex items-center border border-green-600 bg-green-600 group hover:bg-green-600 active:bg-green-600 active:border-green-600 overflow-hidden",type:"button",onClick:F,children:[e.jsx("span",{class:"text-gray-200 font-semibold md:ml-6 ml-4 md:text-[15px] text-sm transform group-hover:translate-x-20 transition-all duration-300",children:"Add Skill"}),e.jsx("span",{class:"absolute right-0 h-full w-10 rounded-md bg-green-600 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx(G,{size:20})})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center w-[100%]",children:[e.jsx("input",{id:"imageInput",className:`
                                block  ${t?"md:w-[85%] w-[65%] ":"w-[100%] opacity-100"}   
                                ${n?"cursor-pointer opacity-100":"cursor-not-allowed opacity-25"}
                                rounded-md px-3.5 py-2 text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400
                                focus:outline-2 focus:-outline-offset-2 focus:outline-green-600
                                transition-all duration-300 ease-in-out
                                `,type:"file",multiple:!0,onChange:z,disabled:t&&!n}),t&&e.jsx("button",{type:"button",onClick:()=>E(!n),className:"p-2  bg-blue-500 text-white rounded  cursor-pointer",class:"md:w-[13%] w-[40%] p-2 text-white bg-blue-700 hover:text-blue-700 hover:bg-transparent hover:font-semibold flex gap-1 justify-center items-center cursor-pointer border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-2 text-center dark:bg-blue-600 dark:text-white dark:border-blue-500 dark:hover:bg-transparent dark:hover:text-blue-500 dark:focus:ring-blue-900",children:n?"Cancel":"Edit Image"})]}),N&&!n&&e.jsx("img",{src:N,alt:"Current preview",className:"object-cover w-[260px] h-[170px] rounded my-2"}),e.jsx("input",{className:"block w-full rounded-md px-3.5 py-2 text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600",type:"url",placeholder:"Link Deploy",value:j,onChange:r=>h(r.target.value),required:!0}),e.jsx("input",{className:"block w-full rounded-md px-3.5 py-2 text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600",type:"url",placeholder:"GitHub Link",value:C,onChange:r=>m(r.target.value),required:!0}),t?e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",class:"text-white bg-blue-700 hover:text-blue-700 hover:bg-transparent hover:font-semibold flex gap-1 items-center cursor-pointer border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-2 text-center dark:bg-blue-600 dark:text-white dark:border-blue-500 dark:hover:bg-transparent dark:hover:text-blue-500 dark:focus:ring-blue-900",children:["Edit ",e.jsx(T,{size:20})]}),e.jsx("button",{type:"button",className:" bg-gray-600 p-2 px-5 font-bold  rounded-sm cursor-pointer ",onClick:()=>L("/project"),children:"Cancel"})]}):e.jsxs("button",{type:"submit",class:"justify-center p-2 gap-2 text-green-700 hover:text-white hover:font-semibold flex items-center cursor-pointer border border-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-3 py-2 text-center  dark:border-green-500 dark:text-green-500 dark:hover:text-white dark:hover:bg-green-600 dark:focus:ring-green-900",children:["Add Project ",e.jsx("span",{className:"mt-[-3px]",children:e.jsx(q,{size:20})})]})]})]})};export{J as default};
